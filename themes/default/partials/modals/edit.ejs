<div class="modal" app-show="view.modal == 'show_edit'" anim="{'enter':'fade-in'}">

    <div class="modal-body" anim="{'enter':'move-up','duration':'0.2'}">

        <div class="grid col-2 pb-1">
            <div>
                <h4 class="text-light capitalise">
                    <span app-show="new._id">Edit <%- view.functions.depluralise(table) %></span>
                    <span app-hide="new._id">Add New <%- view.functions.depluralise(table) %></span>
                </h3>
            </div>
            <div class="text-right">
                <h4 class="text-light clickable" onclick="modalCloseAll()">&times;</h4>
            </div>
        </div>

        <div class="grid pb-2 gap-1 col-2">

            <% if (typeof fields == 'undefined') { %>

                <% columns.forEach((item)=>{ %>
                    <input type="text" app-model="new.<%- item %>">
                <% }) %>

            <% } else { %>

                <% fields.forEach((item,i)=>{ %>

                    <% if (item.input_type == 'image'){ %>

                        <div class="rowspan-5 flex flex-column flex-middle-left">
                            <label for="image_<%- i %>" class="clickable"><img src="/images/Profile_Placeholder.svg" app-src="new.<%- item.name %>" class="<%- item.name %>"></label>
                            <input id="image_<%- i %>" type="file" app-model="new.<%- item.name %>">
                        </div>

                    <% } else if (item.input_type == 'select'){ %>

                        <div class="flex flex-column flex-middle-left">
                            <label><%- view.functions.parseName(item.name) %></label>
                            <select app-model="new.<%- item.name %>">
                                <% if (item.options){ %>
                                    <% item.options.forEach((option)=>{ %>
                                        <option value="<%- option.value %>"><%- option.text %></option>
                                    <% }) %>
                                <% } %>
                                <% if (item.option_data){ %>
                                    <% var option_data = view.functions.getOptionData(item.option_data) %>
                                    <% option_data.forEach((option)=>{ %>
                                        <option value="<%- option._key %>"><%- option.name %></option>
                                    <% }) %>
                                <% } %>
                            </select>
                        </div>

                    <% } else if (item.input_type == 'textarea'){ %>

                        <div class="colspan-2 rowspan-2 flex flex-column flex-middle-left">
                            <label><%- view.functions.parseName(item.name) %></label>
                            <textarea app-model="new.<%- item.name %>" placeholder="<%- item.placeholder %>"></textarea>
                        </div>

                    <% } else if (item.input_type == 'hidden'){ %>

                        <% var value; %>
                        <% if (item.value == 'user_id'){ %>
                            <% value = user._id %>
                        <% } %>
                        <input type="hidden" app-model="new.<%- item.name %>" value="<%- value %>">

                    <% } else if (item.input_type){ %>

                        <div class="flex flex-column flex-middle-left">
                            <label><%- view.functions.parseName(item.name) %></label>
                            <input type="<%- item.input_type %>" app-model="new.<%- item.name %>" placeholder="<%- item.placeholder %>">
                        </div>

                    <% } %>

                <% }) %>

            <% } %>
        </div>

        <div class="text-right">
            <button class="btn highlight capitalise" app-show="new._id" app-click="saveItem('<%- table %>',new)">
                <span>Save <%- view.functions.depluralise(table) %></span>
            </button>
            <button class="btn highlight capitalise" app-hide="new._id" app-click="addItem('<%- table %>',new)">
                <span>Add <%- view.functions.depluralise(table) %></span>
            </button>
        </div>

    </div>

</div>
